"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}(function(){var ElementToggleTrigger=function(){function ElementToggleTrigger(source){_classCallCheck(this,ElementToggleTrigger);this.trigger=source;this.target=document.getElementById(source.getAttribute("data-target"));if(this.target){this.trigger.addEventListener("click",this.handleEvent)}}_createClass(ElementToggleTrigger,[{key:"handleEvent",value:function handleEvent(event){event.preventDefault();var trigger=new ElementToggleTrigger(this);trigger.toggle()}},{key:"toggle",value:function toggle(){if(!this.target){return false}if(this.target.hidden){return this.show()}return this.hide()}},{key:"show",value:function show(){if(!this.target){return false}var target=this.target;this.trigger.setAttribute("aria-expanded","true");target.removeAttribute("hidden");target.style.height="auto";var height=target.clientHeight+"px";target.style.height="0px";window.setTimeout(function(){return target.style.height=height},0);target.addEventListener("transitionend",function(){return target.style.overflow="visible"},{once:true})}},{key:"hide",value:function hide(){if(!this.target){return false}var target=this.target;this.trigger.setAttribute("aria-expanded","false");target.style.height="0px";target.style.overflow="hidden";target.addEventListener("transitionend",function(){return target.setAttribute("hidden","")},{once:true});return true}}]);return ElementToggleTrigger}();var ToggleTip=function(){function ToggleTip(toggle){_classCallCheck(this,ToggleTip);_defineProperty(this,"bubbleClass","toggletip__tip");_defineProperty(this,"toggle",null);_defineProperty(this,"message","");_defineProperty(this,"liveRegion",null);this.message=toggle.getAttribute(ToggleTip.msgAttribute);this.liveRegion=toggle.nextElementSibling;this.toggle=toggle;document.addEventListener("click",ToggleTip.handleEvent);document.addEventListener("blur",ToggleTip.handleEvent);document.addEventListener("keyup",ToggleTip.handleEvent)}_createClass(ToggleTip,[{key:"setActive",value:function setActive(isActive){if(isActive){this.toggle.setAttribute(ToggleTip.activeAttribute,"")}else{this.toggle.removeAttribute(ToggleTip.activeAttribute)}}},{key:"show",value:function show(){var contents="<span class=\"".concat(this.bubbleClass,"\">").concat(this.message,"</span>");var r=this.liveRegion;this.hide();this.setActive(true);window.setTimeout(function(){return r.innerHTML=contents},100)}},{key:"hide",value:function hide(){this.setActive(false);this.liveRegion.innerHTML=""}}],[{key:"handleEvent",value:function handleEvent(event){var active=ToggleTip.getActive();if(event.type==="click"&&event.target.getAttribute(ToggleTip.msgAttribute)){var toggle=new ToggleTip(event.target);if(active){active.hide()}toggle.show();event.preventDefault();return}if(!active){return}if(event.type==="keyup"&&event.code==="Escape"){active.hide();event.preventDefault();return}if(event.type==="click"||event.type==="blur"){if(typeof window.toggleTipDebug==="undefined"){active.hide();event.preventDefault()}}}},{key:"getActive",value:function getActive(){var el=document.querySelector("button[".concat(ToggleTip.msgAttribute,"][").concat(ToggleTip.activeAttribute,"]"));if(el){return new ToggleTip(el)}return null}}]);return ToggleTip}();_defineProperty(ToggleTip,"msgAttribute","data-toggletip-content");_defineProperty(ToggleTip,"activeAttribute","data-active");function nvisInit(){initToggles();initToggleTips();initScrollSticky();maybeToggleHiddenFilters()}function initToggles(){document.querySelectorAll(".nvis-toggle__trigger").forEach(function(el){return new ElementToggleTrigger(el)})}function initToggleTips(){document.querySelectorAll("button[".concat(ToggleTip.msgAttribute,"]")).forEach(function(el){return new ToggleTip(el)})}function initScrollSticky(){var stickySelector=".nvis-sticky";updateStickyElements();var observer=new IntersectionObserver(updateStickyElements,{threshold:[1]});document.querySelectorAll(stickySelector).forEach(function(el){return observer.observe(el)})}function updateStickyElements(){var stickySelector=".nvis-sticky",stuckClass="stuck";document.querySelectorAll(stickySelector).forEach(function(el){if(el.getBoundingClientRect().top<0){el.classList.add(stuckClass)}else{el.classList.remove(stuckClass)}})}function maybeToggleHiddenFilters(){var id="more-filters";var triggerSelector=".nvis-toggle__trigger[data-target=\"".concat(id,"\"]");var moreFilters=document.getElementById(id);if(!moreFilters){return false}var filters=[].concat(_toConsumableArray(moreFilters.querySelectorAll("select")),_toConsumableArray(moreFilters.querySelectorAll("input")));var toggleButton=document.querySelector(triggerSelector);if(!(toggleButton&&filters.length)){return false}var params=new URLSearchParams(window.location.search);filters.forEach(function(f){if(params.get(f.name)){var trigger=new ElementToggleTrigger(toggleButton);return trigger.show()}});return false}window.addEventListener("load",nvisInit)})();
